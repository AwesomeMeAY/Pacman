.TH pacman 8 "July 18, 2002" "pacman #VERSION#" ""
.SH NAME
pacman \- package manager utility
.SH SYNOPSIS
\fBpacman  <operation> [options] <package> [package] ...\fP
.SH DESCRIPTION
\fBpacman\fP is a \fIpackage management\fP utility that tracks installed
packages on a linux system.  It has simple dependency support and the ability
to connect to a remote ftp server and automatically upgrade packages on
the local system.  pacman package are \fIgzipped tar\fP format.
.SH OPERATIONS
.TP
.B "\-A, \-\-add"
Add a package to the system.  Package will be uncompressed
into the installation root and the database will be updated.
.TP
.B "\-R, \-\-remove"
Remove a package from the system.  Files belonging to the
specified package will be deleted, and the database will
be updated.  Most configuration files will be saved with a
\fI.pacsave\fP extension unless the \fB--nosave\fP option was
used.
.TP
.B "\-U, \-\-upgrade"
Upgrade a package.  This is essentially a "remove-then-add"
process.  See \fBHANDLING CONFIG FILES\fP for an explanation
on how pacman takes care of config files.
.TP
.B "\-Q, \-\-query"
Query the package database.  This operation allows you to
view installed packages and their files, as well as meta-info
about individual packages (dependencies, conflicts, install date,
build date, size).  This can be run against the local package
database or can be used on individual .tar.gz packages.  See
\fBQUERY OPTIONS\fP below.
.TP
.B "\-S, \-\-sync"
Synchronize packages.  With this function you can install packages
directly from the ftp servers, complete with all dependencies required
to run the packages.  For example, \fBpacman -S qt\fP will download
qt and all the packages it depends on and install them. You could also use
\fBpacman -Su\fP to upgrade all packages that are out of date (see below).
.TP
.B "\-V, \-\-version"
Display version and exit.
.TP
.B "\-h, \-\-help"
Display syntax for the given operation.  If no operation was
supplied then the general syntax is shown.
.SH OPTIONS
.TP
.B "\-v, \-\-verbose"
Output more status and error messages.
.TP
.B "\-f, \-\-force"
Bypass file conflict checks,, overwriting conflicting files.  If the
package that is about to be installed contains files that are already
installed, this option will cause all those files to be overwritten.
This option should be used with care, ideally not at all.
.TP
.B "\-d, \-\-nodeps"
Skips all dependency checks.  Normally, pacman will always check
a package's dependency fields to ensure that all dependencies are
installed and there are no package conflicts in the system.  This
switch disables these checks.
.TP
.B "\-n, \-\-nosave"
(only used with \fB--remove\fP)
Instructs pacman to ignore file backup designations.  Normally, when
a file is about to be \fIremoved\fP from the system the database is first
checked to see if the file should be renamed to a .pacsave extension.  If
\fB--nosave\fP is used, these designations are ignored and the files are
removed.
.TP
.B "\-r, \-\-root <path>"
Specify alternative installation root (default is "/"). This
should \fInot\fP be used as a way to install software into
e.g. /usr/local instead of /usr. Instead this should be used
if you want to install a package on a temporary mounted partition,
which is "owned" by another system. By using this option you not only
specify where the software should be installed, but you also
specify which package database to use.
.SH SYNC OPTIONS
.TP
.B "\-y, \-\-refresh"
Download a fresh copy of the master package list from the ftp server
defined in \fI/etc/pacman.conf\fP.  This should typically be used each
time you use \fB--sysupgrade\fP.
.TP
.B "\-u, \-\-sysupgrade"
Upgrades all packages that are out of date.  pacman will examine every
package installed on the system, and if a newer package exists on the
server it will upgrade.  pacman will present a report of all packages
it wants to upgrade and will not proceed without user confirmation.
Dependencies are automatically resolved at this level and will be
installed/upgraded if necessary.
.TP
.B "\-s, \-\-search <string>"
This will search each package in the package list for names or descriptions
that contains <string>.
.TP
.B "\-c, \-\-clean"
Remove packages from the cache.  When pacman downloads packages,
it saves them in \fI/var/cache/pacman/pkg\fP.  If you need to free up
diskspace, you can remove these packages by using the --clean option.
.SH QUERY OPTIONS
.TP
.B "\-o, \-\-owns <file>"
Search for the package that owns <file>.
.TP
.B "\-l, \-\-list"
List all files owned by <package>.  Multiple packages can be specified on
the command line.
.TP
.B "\-i, \-\-info"
Display information on a given package.  If it is used with the \fB-p\fP
option then the .PKGINFO file will be printed.
.TP
.B "\-p, \-\-file"
Tells pacman that the package supplied on the command line is a
file, not an entry in the database.  Pacman will decompress the
file and query it.  This is useful with \fB--info\fP and \fB--list\fP.
.SH HANDLING CONFIG FILES
pacman uses the same logic as rpm to determine action against files
that are designated to be backed up.  During an upgrade, it uses 3
md5 hashes for each backup file to determine the required action:
one for the original file installed, one for the new file that's about
to be installed, and one for the actual file existing on the filesystem.
After comparing these 3 hashes, the follow scenarios can result:
.TP
original=\fBX\fP, current=\fBX\fP, new=\fBX\fP
All three files are the same, so we win either way.  Install the new file.
.TP
original=\fBX\fP, current=\fBX\fP, new=\fBY\fP
The current file is un-altered from the original but the new one is
different.  Since the user did not ever modify the file, and the new
one may contain improvements/bugfixes, we install the new file.
.TP
original=\fBX\fP, current=\fBY\fP, new=\fBX\fP
Both package versions contain the exact same file, but the one
on the filesystem has been modified since.  In this case, we leave
the current file in place.
.TP
original=\fBX\fP, current=\fBY\fP, new=\fBY\fP
The new one is identical to the current one.  Win win.  Install the new file.
.TP
original=\fBX\fP, current=\fBY\fP, new=\fBZ\fP
All three files are different.  So we install the new file, but back up the
old one to a .pacsave extension.  This way the user can move the old configuration
file back into place if he wishes.
.SH CONFIGURATION
pacman will attempt to read \fI/etc/pacman.conf\fP each time it is invoked.  Currently
the only options in it are for the --sync operation, but more may be added later.
.TP
.B "Sync_Tree_Name"
Sets the name of the package set you wish to follow.  The common choices are \fIcurrent\fP
and \fIstable\fP.  You could also specify a specific package version, eg, 0.3.
.TP
.B "Sync_Server"
This is the hostname of the ftp server that will be used for downloading lists and
packages. eg, \fIftp.ibiblio.org\fP.
.TP
.B "Sync_Tree_Path"
This is the full path name (on the ftp server) to the package tree you are following.
So if you are following \fIcurrent\fP, on \fIftp.ibiblio.org\fP, you would use
\fI/pub/linux/distributions/archlinux/current\fP.
.SH SEE ALSO
\fBmakepkg\fP is the package-building tool that comes with pacman.
.SH AUTHOR
.nf
Judd Vinet <jvinet@zeroflux.org>
.fi
